{{ $page := .page }}
{{ $source := .source }}
{{ $alt := .alt | safeHTML }}

{{ $width := .width }}
{{ $width2x := (mul (int $width) (int 2)) }}

{{ $size := (printf "%s%s" $width "x"  ) }}
{{ $size2x := (printf "%s%s" (print $width2x) "x" ) }}

{{ $class := .class }}

{{ if $source }}
  {{ with $page.Resources.GetMatch $source  }}
    {{ with .  }}
      {{ $src1x := (.Resize (printf "%s %s" $size  )) }}
      {{ $src2x := (.Resize (printf "%s %s" $size2x  )) }}
      <img src="{{ $src1x.RelPermalink }}" data-srcset="{{ $src1x.RelPermalink }} 1x, {{ $src2x.RelPermalink }} 2x" alt="{{ $alt }}" title="{{ $alt }}"
        width="{{$src1x.Width}}" height="{{$src1x.Height}}" loading="lazy" class="{{$class}}">
    {{ end }}
  {{ end }}
{{ end }}


