{{ $site := .site }}
{{ $page := .page }}
{{ $params := .params }}
{{ $heading := .params.heading }}

<div class="mb-12 text-gray-800 bg-white faq-blocks">
  <div class="px-6 py-8 mx-auto lg:px-8 xl:px-24 lg:py-12 xl:py-24">
    {{ with $params.title }}
      <h2 class="mb-4 text-2xl font-bold text-center xl:mb-12">{{ . | markdownify }}</h2>
    {{ end }}
    {{ with $params.items }}
    <ul class="max-w-3xl mx-auto space-y-4"  x-data="{selected:null}" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
      {{ range $index, $element :=  . }}
        {{ $slug := . }}
        {{ with $site.GetPage "faq" }}
          
         {{ range .Resources }}
          {{ if eq $slug .Params.slug}}
          {{ with .Params.faq}}
          <li class="flex flex-col align-center">
            <button aria-label='{{ T "toggle_item"}}' class="flex items-center justify-between w-full px-3 py-4 font-semibold bg-gray-100 rounded cursor-pointer hover:bg-gray-200 focus:outline-none" @click="selected !== {{$index}} ? selected = {{$index}} : selected = null"  itemprop="name">
              {{ .question | markdownify}}
              <span class="flex items-center justify-center w-6 h-6 branch-element-text">
                <svg x-show="selected == {{$index}}" class="w-3 h-3 fill-current" viewBox="0 -192 469.33333 469" xmlns="http://www.w3.org/2000/svg"><path d="m437.332031.167969h-405.332031c-17.664062 0-32 14.335937-32 32v21.332031c0 17.664062 14.335938 32 32 32h405.332031c17.664063 0 32-14.335938 32-32v-21.332031c0-17.664063-14.335937-32-32-32zm0 0"/></svg>
                
                <svg x-show="selected != {{$index}}" class="w-3 h-3 fill-current" viewBox="0 0 469.33333 469.33333" xmlns="http://www.w3.org/2000/svg"><path d="m437.332031 192h-160v-160c0-17.664062-14.335937-32-32-32h-21.332031c-17.664062 0-32 14.335938-32 32v160h-160c-17.664062 0-32 14.335938-32 32v21.332031c0 17.664063 14.335938 32 32 32h160v160c0 17.664063 14.335938 32 32 32h21.332031c17.664063 0 32-14.335937 32-32v-160h160c17.664063 0 32-14.335937 32-32v-21.332031c0-17.664062-14.335937-32-32-32zm0 0"/></svg>
              </span>
            </button>
            <div class="p-3" x-show="selected == {{$index}}" itemprop="text">
              {{ .answer | markdownify}}
            </div>
          </li>
          {{ end }}

            {{ end }}
         {{ end }}

        {{ end }} 

      {{ end }} 
      </ul>
    {{ end }} 
    {{ if $params.more_items}}
    <div class="flex items-center justify-center pt-8 lg:pt-16">
      <a href="/faqs" class="flex items-center justify-center w-12 h-12 duration-300 transform rotate-0 branch-element-bg hover:rotate-45 ">
        <span class="sr-only">{{ T "view_more_items" }}</span>
        <svg class="w-6 h-6 text-green-100" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
      </a>
    </div>
    {{ end }}
      
  </div>
</div>

